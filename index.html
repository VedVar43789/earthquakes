<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Seismic Lottery: Why Your ZIP Code Matters More Than Magnitude</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-screen">
        <div class="loading-content">
            <div class="seismic-waves"></div>
            <p>Loading earthquake data...</p>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">The Seismic Lottery</h1>
            <h2 class="hero-subtitle">Why Your ZIP Code Matters More Than Magnitude</h2>
            <div class="scroll-prompt">
                <span>Scroll to explore</span>
                <div class="scroll-arrow">↓</div>
            </div>
        </div>
        <div class="hero-background" id="hero-viz"></div>
    </section>

    <!-- Fixed Visualization Container -->
    <div id="viz-container" class="viz-container">
        <div id="viz-globe" class="viz-layer"></div>
    </div>

    <!-- Scrollytelling Sections -->
    <main id="scrolly">
        
        <!-- Section 1: The Ring of Fire Opens -->
        <section class="story-section section-globe-layout" data-section="1">
            <div class="content-split">
                <div class="text-wrapper">
                    <div class="step" data-step="ring-intro">
                        <div class="text-side">
                            <h3>When the Earth Shakes</h3>
                            <p class="lead">Every earthquake is measured on a scale that seems to promise certainty: the Richter magnitude. The higher the number, the more devastating the quake.</p>
                            <p>This glowing ring around the Pacific—the Ring of Fire—unleashes <span class="highlight">90%</span> of the world's most powerful earthquakes. Here, magnitude <span class="highlight">8.0</span> and <span class="highlight">9.0</span> quakes regularly tear through the seafloor, sending shockwaves across entire continents.</p>
                            <p>Scientists can measure these forces with precision. But measuring the shaking is only the beginning of the story.</p>
                        </div>
                    </div>
                    <div class="step" data-step="ring-reveal">
                        <div class="text-side">
                            <h3>The Magnitude Assumption</h3>
                            <p>For decades, we've operated under a simple assumption: <span class="highlight">bigger earthquakes kill more people</span>. It makes intuitive sense—more energy released should mean more destruction, more collapsed buildings, more casualties.</p>
                            <p>A magnitude 7.0 earthquake releases the energy of <span class="highlight">32 nuclear bombs</span>. A magnitude 8.0 releases <span class="highlight">1,000 times more</span>. A magnitude 9.0? That's equivalent to <span class="highlight">32,000 nuclear bombs</span> detonating simultaneously.</p>
                            <div class="stats-highlight">
                                <div class="stat-item">
                                    <span class="stat-number">32,000x</span>
                                    <span class="stat-label">Nuclear bomb energy in a 9.0 quake</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">1,000x</span>
                                    <span class="stat-label">Energy difference between 7.0 and 8.0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="step" data-step="cities-on-fire">
                        <div class="text-side">
                            <h3>Cities in the Crosshairs</h3>
                            <p class="lead">Around this Ring of Fire, <span class="highlight">2.5 billion people</span> live within striking distance of these massive earthquakes.</p>
                            <p>Tokyo, with 37 million residents, sits atop one of the most seismically active zones on Earth. San Francisco straddles the San Andreas Fault. Jakarta, Manila, Santiago—each a sprawling metropolis built directly on the geological firing line.</p>
                            <p>When the big ones hit these cities, the math seems straightforward: more magnitude means more deaths. The largest earthquakes should create the largest disasters.</p>
                        </div>
                    </div>
                    <div class="step" data-step="dangerous-paradise">
                        <div class="text-side">
                            <h3>The Seismic Lottery</h3>
                            <p>In this lottery of tectonic chance, your odds of survival seem to depend on the draw of magnitude. Live in a place that gets hit by a <span class="highlight">9.0</span> and face catastrophe. Experience a <span class="highlight">6.0</span> and count yourself lucky.</p>
                            <p>Emergency planners prepare for the worst-case scenarios. Building codes factor in expected magnitudes. Insurance companies calculate premiums based on seismic intensity maps.</p>
                            <p class="emphasis">Everything revolves around that single number: how hard will the earth shake?</p>
                        </div>
                    </div>
                    <div class="step" data-step="human-vulnerability">
                        <div class="text-side">
                            <h3>Testing the Theory</h3>
                            <p class="lead">If magnitude determines death toll, then history's deadliest earthquakes should be the most powerful ones.</p>
                            <p>Every red dot you see is a data point. Each earthquake tests our simple assumption: <span class="highlight">bigger shaking = more deaths</span>.</p>
                            <p>The Ring of Fire has given us the full spectrum—from gentle magnitude 4.0 tremors to earth-splitting 9.0 giants. Logic says the pattern should be obvious: the biggest earthquakes should top the casualty lists.</p>
                            <div class="stats-highlight">
                                <div class="stat-item">
                                    <span class="stat-number">2.5B</span>
                                    <span class="stat-label">People in earthquake zones</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">?</span>
                                    <span class="stat-label">Does magnitude predict deaths?</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="globe-side" id="section1-globe">
                    <div class="globe-container"></div>
                </div>
            </div>
        </section>

        <!-- Section 2: The Critical Question -->
        <section class="story-section critical-question-section" data-section="2">
            <!-- Step 1: Just the Critical Question -->
            <div class="step" data-step="question-only">
                <div class="question-container" id="question-container">
                    <h2 class="critical-question-text">
                        Does magnitude accurately predict 
                        <span class="highlight-deaths">deaths</span>?
                    </h2>
                </div>
                <!-- Scroll Indicator for Step 1 -->
                <div class="scroll-to-earthquake">
                    <span>Scroll more to continue</span>
                    <div class="arrow-down">↓</div>
                </div>
            </div>
        </section>

        <!-- Section 3: Earthquake Simulation & Richter Introduction -->
        <section class="story-section critical-question-section" data-section="2">
            <div class="step" data-step="earthquake-richter">
                <!-- Earthquake Simulation Overlay -->
                <div class="earthquake-overlay" id="earthquake-overlay">
                    <div class="screen-cracks"></div>
                    <div class="earthquake-alert-content">
                        <h3 class="earthquake-alert">EARTHQUAKE!</h3>
                        <div class="magnitude-indicator">MAGNITUDE 7.0</div>
                    </div>
                </div>

                <!-- Richter Introduction Container -->
                <div id="richter-introduction" class="richter-introduction">
                    <!-- Richter Mascot & Speech Bubble Wrapper -->
                    <div class="richter-mascot-wrapper" id="richter-mascot-wrapper">
                        <img src="result.png" alt="Richter Mascot" class="richter-mascot-image" id="richter-mascot-image" />
                        <div class="speech-sequence" id="speech-sequence">
                            <div class="speech-bubble" id="speech-bubble">
                                <p id="richter-dialogue"></p>
                                <div class="speech-tail"></div>
                            </div>
                            <button id="continue-btn" class="continue-btn" style="display:none;">Continue</button>
                        </div>
                    </div>

                    <!-- Theoretical Chart Display -->
                    <div class="theory-chart-container" id="theory-chart-container">
                        <h4>Draw what <em>YOU</em> think the relationship looks like:</h4>
                        <div class="theoretical-chart" id="theoretical-chart">
                            <!-- Canvas for drawing will be created here -->
                        </div>
                        <p class="chart-caption">Use the canvas below to sketch your prediction.</p>
                    </div>

                    <!-- Interactive Test Button -->
                    <div class="test-theory-section" id="test-theory-section">
                        <button class="test-theory-btn" id="test-theory-btn">
                            <span class="btn-text">TEST THE THEORY</span>
                            <div class="btn-glow"></div>
                        </button>
                        <p class="challenge-text">
                            "I bet when we look at the real data, we'll see this perfect pattern. 
                            Magnitude goes up, deaths go up. Simple, right? Let's find out..."
                        </p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Tooltip -->
    <div id="tooltip" class="tooltip hidden"></div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html> 